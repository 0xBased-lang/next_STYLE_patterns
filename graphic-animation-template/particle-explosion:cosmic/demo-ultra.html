<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Particle Explosion: Cosmic - ULTRA Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: #0a0a0a;
      color: #fff;
      overflow: hidden;
    }

    #canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .controls-panel {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(15, 15, 25, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 20px;
      max-width: 350px;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
      z-index: 1000;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .controls-panel::-webkit-scrollbar {
      width: 8px;
    }

    .controls-panel::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 4px;
    }

    .controls-panel::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 5px;
      background: linear-gradient(135deg, #FF0080, #00D4FF);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 12px;
      color: #888;
      margin-bottom: 20px;
    }

    .section {
      margin-bottom: 25px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 12px;
      color: #00D4FF;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .control {
      margin-bottom: 15px;
    }

    label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-size: 13px;
      color: #ccc;
    }

    .value {
      color: #00FF88;
      font-weight: 600;
      font-family: 'Courier New', monospace;
    }

    input[type="range"] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.1);
      outline: none;
      -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: linear-gradient(135deg, #FF0080, #00D4FF);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 212, 255, 0.5);
    }

    input[type="range"]::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: linear-gradient(135deg, #FF0080, #00D4FF);
      cursor: pointer;
      border: none;
    }

    select {
      width: 100%;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      color: #fff;
      font-size: 13px;
      cursor: pointer;
      outline: none;
    }

    select:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    .presets {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin-bottom: 20px;
    }

    .preset-btn {
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      color: #fff;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .preset-btn:hover {
      background: rgba(255, 0, 128, 0.2);
      border-color: #FF0080;
      transform: translateY(-2px);
    }

    .action-btn {
      width: 100%;
      padding: 12px;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #FF0080, #9D00FF);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 0, 128, 0.4);
    }

    .action-btn.secondary {
      background: rgba(255, 255, 255, 0.08);
    }

    .action-btn.secondary:hover {
      background: rgba(255, 255, 255, 0.12);
    }

    .fps-monitor {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: #0F0;
      padding: 8px 16px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      border-radius: 8px;
      font-weight: 600;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0, 255, 0, 0.3);
    }

    .toggle-panel {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      background: rgba(255, 0, 128, 0.9);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      z-index: 999;
      transition: all 0.3s;
    }

    .toggle-panel:hover {
      background: rgba(255, 0, 128, 1);
      transform: scale(1.05);
    }

    .hidden {
      transform: translateX(400px);
      opacity: 0;
      pointer-events: none;
    }

    @media (max-width: 768px) {
      .controls-panel {
        max-width: calc(100% - 40px);
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div class="fps-monitor">FPS: <span id="fps">60</span></div>

  <button class="toggle-panel" onclick="togglePanel()">‚öôÔ∏è Controls</button>

  <div class="controls-panel" id="controlsPanel">
    <h1>Particle Explosion</h1>
    <div class="subtitle">COSMIC ULTRA EDITION</div>

    <!-- Presets -->
    <div class="section">
      <div class="section-title">‚ö° Quick Presets</div>
      <div class="presets">
        <button class="preset-btn" onclick="applyPreset('celebration')">üéâ Celebration</button>
        <button class="preset-btn" onclick="applyPreset('cosmic')">üåå Cosmic</button>
        <button class="preset-btn" onclick="applyPreset('fire')">üî• Fire</button>
        <button class="preset-btn" onclick="applyPreset('electric')">‚ö° Electric</button>
        <button class="preset-btn" onclick="applyPreset('neon')">üíé Neon</button>
        <button class="preset-btn" onclick="applyPreset('rainbow')">üåà Rainbow</button>
        <button class="preset-btn" onclick="applyPreset('monochrome')">‚ö™ Monochrome</button>
        <button class="preset-btn" onclick="applyPreset('quantum')">üîÆ Quantum</button>
      </div>
    </div>

    <!-- Particle Settings -->
    <div class="section">
      <div class="section-title">üé® Particle Settings</div>

      <div class="control">
        <label>
          <span>Count</span>
          <span class="value" id="particleCount-value">500</span>
        </label>
        <input type="range" id="particleCount" min="100" max="2000" value="500" step="50">
      </div>

      <div class="control">
        <label>
          <span>Size Min</span>
          <span class="value" id="particleSizeMin-value">2</span>
        </label>
        <input type="range" id="particleSizeMin" min="1" max="10" value="2" step="0.5">
      </div>

      <div class="control">
        <label>
          <span>Size Max</span>
          <span class="value" id="particleSizeMax-value">6</span>
        </label>
        <input type="range" id="particleSizeMax" min="1" max="20" value="6" step="0.5">
      </div>

      <div class="control">
        <label><span>Shape</span></label>
        <select id="particleShape">
          <option value="circle">Circle</option>
          <option value="square">Square</option>
          <option value="star">Star</option>
          <option value="triangle">Triangle</option>
          <option value="hexagon">Hexagon</option>
        </select>
      </div>
    </div>

    <!-- Physics -->
    <div class="section">
      <div class="section-title">üöÄ Physics & Motion</div>

      <div class="control">
        <label>
          <span>Explosion Force</span>
          <span class="value" id="explosionForce-value">5</span>
        </label>
        <input type="range" id="explosionForce" min="0.1" max="20" value="5" step="0.1">
      </div>

      <div class="control">
        <label>
          <span>Gravity</span>
          <span class="value" id="gravity-value">0.05</span>
        </label>
        <input type="range" id="gravity" min="-1" max="2" value="0.05" step="0.01">
      </div>

      <div class="control">
        <label>
          <span>Friction</span>
          <span class="value" id="friction-value">0.98</span>
        </label>
        <input type="range" id="friction" min="0.8" max="1" value="0.98" step="0.01">
      </div>

      <div class="control">
        <label>
          <span>Velocity Randomness</span>
          <span class="value" id="velocityRandomness-value">50</span>
        </label>
        <input type="range" id="velocityRandomness" min="0" max="100" value="50" step="5">
      </div>

      <div class="control">
        <label>
          <span>Rotation Speed</span>
          <span class="value" id="rotationSpeed-value">2</span>
        </label>
        <input type="range" id="rotationSpeed" min="0" max="10" value="2" step="0.1">
      </div>
    </div>

    <!-- Visual Effects -->
    <div class="section">
      <div class="section-title">‚ú® Visual Effects</div>

      <div class="control">
        <label>
          <span>Glow Intensity</span>
          <span class="value" id="glowIntensity-value">10</span>
        </label>
        <input type="range" id="glowIntensity" min="0" max="50" value="10" step="1">
      </div>

      <div class="control">
        <label>
          <span>Trail Length</span>
          <span class="value" id="trailLength-value">5</span>
        </label>
        <input type="range" id="trailLength" min="0" max="30" value="5" step="1">
      </div>

      <div class="control">
        <label>
          <span>Particle Lifetime</span>
          <span class="value" id="particleLifetime-value">5</span>
        </label>
        <input type="range" id="particleLifetime" min="1" max="15" value="5" step="0.5">
      </div>

      <div class="control">
        <label><span>Fade Mode</span></label>
        <select id="fadeMode">
          <option value="linear">Linear</option>
          <option value="exponential" selected>Exponential</option>
          <option value="inverse">Inverse</option>
        </select>
      </div>
    </div>

    <!-- Mouse Interaction -->
    <div class="section">
      <div class="section-title">üñ±Ô∏è Mouse Interaction</div>

      <div class="control">
        <label><span>Interaction Mode</span></label>
        <select id="mouseInteraction">
          <option value="attract">Attract</option>
          <option value="repel" selected>Repel</option>
          <option value="none">None</option>
        </select>
      </div>

      <div class="control">
        <label>
          <span>Mouse Radius</span>
          <span class="value" id="mouseRadius-value">150</span>
        </label>
        <input type="range" id="mouseRadius" min="50" max="500" value="150" step="10">
      </div>

      <div class="control">
        <label>
          <span>Mouse Force</span>
          <span class="value" id="mouseForce-value">2</span>
        </label>
        <input type="range" id="mouseForce" min="0.1" max="10" value="2" step="0.1">
      </div>
    </div>

    <!-- Actions -->
    <div class="section">
      <div class="section-title">üíæ Export & Actions</div>
      <button class="action-btn" onclick="exportConfig()">Export Configuration</button>
      <button class="action-btn secondary" onclick="resetToDefault()">Reset to Default</button>
      <button class="action-btn secondary" onclick="randomize()">üé≤ Randomize</button>
    </div>
  </div>

  <script>
    // Configuration
    const config = {
      particleCount: 500,
      particleSizeMin: 2,
      particleSizeMax: 6,
      particleShape: 'circle',
      explosionForce: 5,
      gravity: 0.05,
      friction: 0.98,
      velocityRandomness: 50,
      rotationSpeed: 2,
      glowIntensity: 10,
      trailLength: 5,
      particleLifetime: 5,
      fadeMode: 'exponential',
      mouseInteraction: 'repel',
      mouseRadius: 150,
      mouseForce: 2,
      colors: ['#FF0080', '#00D4FF', '#FF6B00', '#00FF88', '#9D00FF', '#FFD700']
    }

    // Canvas setup
    const canvas = document.getElementById('canvas')
    const ctx = canvas.getContext('2d', { alpha: false })
    let particles = []
    let mouseX = 0
    let mouseY = 0
    let fps = 60
    let lastTime = Date.now()

    function resizeCanvas() {
      canvas.width = window.innerWidth
      canvas.height = window.innerHeight
    }
    resizeCanvas()
    window.addEventListener('resize', resizeCanvas)

    // Mouse tracking
    canvas.addEventListener('mousemove', (e) => {
      mouseX = e.clientX
      mouseY = e.clientY
    })

    canvas.addEventListener('click', (e) => {
      createExplosion(e.clientX, e.clientY, config.particleCount / 2)
    })

    // Particle class
    class Particle {
      constructor(x, y, vx, vy, color) {
        this.x = x
        this.y = y
        this.vx = vx
        this.vy = vy
        this.life = config.particleLifetime
        this.maxLife = config.particleLifetime
        this.size = config.particleSizeMin + Math.random() * (config.particleSizeMax - config.particleSizeMin)
        this.rotation = Math.random() * Math.PI * 2
        this.rotationSpeed = (Math.random() - 0.5) * config.rotationSpeed * 0.1
        this.color = color
        this.trail = []
        this.alpha = 1
      }

      update(deltaTime) {
        // Physics
        this.vy += config.gravity
        this.vx *= config.friction
        this.vy *= config.friction

        // Mouse interaction
        if (config.mouseInteraction !== 'none') {
          const dx = this.x - mouseX
          const dy = this.y - mouseY
          const dist = Math.sqrt(dx * dx + dy * dy)

          if (dist < config.mouseRadius) {
            const force = config.mouseForce * (1 - dist / config.mouseRadius)
            const angle = Math.atan2(dy, dx)

            if (config.mouseInteraction === 'repel') {
              this.vx += Math.cos(angle) * force
              this.vy += Math.sin(angle) * force
            } else {
              this.vx -= Math.cos(angle) * force
              this.vy -= Math.sin(angle) * force
            }
          }
        }

        // Position
        this.x += this.vx
        this.y += this.vy
        this.rotation += this.rotationSpeed

        // Trail
        if (config.trailLength > 0) {
          this.trail.unshift({ x: this.x, y: this.y, alpha: this.alpha })
          if (this.trail.length > config.trailLength) {
            this.trail.pop()
          }
        }

        // Life
        this.life -= deltaTime / 1000

        // Fade
        const lifePercent = this.life / this.maxLife
        if (config.fadeMode === 'linear') {
          this.alpha = lifePercent
        } else if (config.fadeMode === 'exponential') {
          this.alpha = Math.pow(lifePercent, 2)
        } else if (config.fadeMode === 'inverse') {
          this.alpha = Math.sqrt(lifePercent)
        }

        return this.life > 0
      }

      draw() {
        // Trail
        if (config.trailLength > 0 && this.trail.length > 1) {
          for (let i = 1; i < this.trail.length; i++) {
            const prevPoint = this.trail[i - 1]
            const currPoint = this.trail[i]
            const trailAlpha = (this.alpha * (1 - i / config.trailLength)) / 2

            ctx.strokeStyle = this.color.replace(/[\d.]+\)$/g, `${trailAlpha})`)
            ctx.lineWidth = this.size * (1 - i / config.trailLength)
            ctx.beginPath()
            ctx.moveTo(prevPoint.x, prevPoint.y)
            ctx.lineTo(currPoint.x, currPoint.y)
            ctx.stroke()
          }
        }

        // Glow
        if (config.glowIntensity > 0) {
          ctx.shadowBlur = config.glowIntensity
          ctx.shadowColor = this.color
        }

        // Particle
        ctx.save()
        ctx.translate(this.x, this.y)
        ctx.rotate(this.rotation)
        ctx.globalAlpha = this.alpha

        const halfSize = this.size / 2
        ctx.fillStyle = this.color

        if (config.particleShape === 'circle') {
          ctx.beginPath()
          ctx.arc(0, 0, halfSize, 0, Math.PI * 2)
          ctx.fill()
        } else if (config.particleShape === 'square') {
          ctx.fillRect(-halfSize, -halfSize, this.size, this.size)
        } else if (config.particleShape === 'star') {
          drawStar(0, 0, 5, halfSize, halfSize / 2)
          ctx.fill()
        } else if (config.particleShape === 'triangle') {
          ctx.beginPath()
          ctx.moveTo(0, -halfSize)
          ctx.lineTo(halfSize, halfSize)
          ctx.lineTo(-halfSize, halfSize)
          ctx.closePath()
          ctx.fill()
        } else if (config.particleShape === 'hexagon') {
          drawPolygon(0, 0, 6, halfSize)
          ctx.fill()
        }

        ctx.restore()
        ctx.shadowBlur = 0
      }
    }

    function drawStar(cx, cy, spikes, outerRadius, innerRadius) {
      let rot = (Math.PI / 2) * 3
      const step = Math.PI / spikes

      ctx.beginPath()
      ctx.moveTo(cx, cy - outerRadius)

      for (let i = 0; i < spikes; i++) {
        let x = cx + Math.cos(rot) * outerRadius
        let y = cy + Math.sin(rot) * outerRadius
        ctx.lineTo(x, y)
        rot += step

        x = cx + Math.cos(rot) * innerRadius
        y = cy + Math.sin(rot) * innerRadius
        ctx.lineTo(x, y)
        rot += step
      }

      ctx.lineTo(cx, cy - outerRadius)
      ctx.closePath()
    }

    function drawPolygon(x, y, sides, radius) {
      ctx.beginPath()
      for (let i = 0; i < sides; i++) {
        const angle = (Math.PI * 2 * i) / sides - Math.PI / 2
        const px = x + Math.cos(angle) * radius
        const py = y + Math.sin(angle) * radius
        if (i === 0) {
          ctx.moveTo(px, py)
        } else {
          ctx.lineTo(px, py)
        }
      }
      ctx.closePath()
    }

    function createExplosion(x, y, count) {
      for (let i = 0; i < count; i++) {
        const angle = (Math.PI * 2 * i) / count + (Math.random() - 0.5) * (config.velocityRandomness / 50)
        const force = config.explosionForce * (1 + (Math.random() - 0.5) * (config.velocityRandomness / 100))
        const color = config.colors[Math.floor(Math.random() * config.colors.length)]

        particles.push(new Particle(
          x, y,
          Math.cos(angle) * force,
          Math.sin(angle) * force,
          color
        ))
      }
    }

    // Animation loop
    function animate() {
      const now = Date.now()
      const deltaTime = now - lastTime
      lastTime = now

      // FPS
      fps = Math.round(1000 / deltaTime)
      document.getElementById('fps').textContent = fps

      // Clear
      ctx.fillStyle = 'rgba(10, 10, 10, 1)'
      ctx.fillRect(0, 0, canvas.width, canvas.height)

      // Update and draw
      ctx.globalCompositeOperation = 'lighter'
      particles = particles.filter(p => {
        if (p.update(deltaTime)) {
          p.draw()
          return true
        }
        return false
      })
      ctx.globalCompositeOperation = 'source-over'

      requestAnimationFrame(animate)
    }

    // Initial explosion
    createExplosion(canvas.width / 2, canvas.height / 2, config.particleCount)
    animate()

    // Control bindings
    const controls = document.querySelectorAll('input[type="range"], select')
    controls.forEach(control => {
      control.addEventListener('input', (e) => {
        const key = e.target.id
        const value = e.target.type === 'range' ? parseFloat(e.target.value) : e.target.value
        config[key] = value

        // Update display
        const valueDisplay = document.getElementById(`${key}-value`)
        if (valueDisplay) {
          valueDisplay.textContent = value
        }
      })

      // Initialize displays
      if (control.type === 'range') {
        const valueDisplay = document.getElementById(`${control.id}-value`)
        if (valueDisplay) {
          valueDisplay.textContent = control.value
        }
      }
    })

    // Presets
    const presets = {
      celebration: {
        colors: ['#FF0080', '#00D4FF', '#FFD700', '#FF6B00', '#00FF88', '#9D00FF', '#FF1493'],
        explosionForce: 8,
        gravity: 0.1,
        particleCount: 800,
        glowIntensity: 15,
        trailLength: 10,
        particleShape: 'circle',
        velocityRandomness: 70
      },
      cosmic: {
        colors: ['#1E3A8A', '#4F46E5', '#7C3AED', '#EC4899', '#F59E0B'],
        explosionForce: 3,
        gravity: 0.02,
        particleCount: 1000,
        glowIntensity: 20,
        trailLength: 15,
        particleShape: 'circle',
        velocityRandomness: 30
      },
      fire: {
        colors: ['#FF0000', '#FF4500', '#FF6B00', '#FFD700', '#FFFFFF'],
        explosionForce: 6,
        gravity: -0.1,
        particleCount: 600,
        glowIntensity: 25,
        trailLength: 8,
        particleShape: 'triangle',
        velocityRandomness: 50
      },
      electric: {
        colors: ['#0000FF', '#00D4FF', '#FFFFFF', '#9D00FF'],
        explosionForce: 10,
        gravity: 0,
        particleCount: 400,
        glowIntensity: 30,
        trailLength: 20,
        particleShape: 'star',
        velocityRandomness: 80
      },
      neon: {
        colors: ['#FF0080', '#00FF88', '#FFD700', '#00D4FF'],
        explosionForce: 5,
        gravity: 0.05,
        particleCount: 500,
        glowIntensity: 20,
        trailLength: 12,
        particleShape: 'hexagon',
        velocityRandomness: 50
      },
      rainbow: {
        colors: ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#9400D3'],
        explosionForce: 5,
        gravity: 0.08,
        particleCount: 700,
        glowIntensity: 15,
        trailLength: 10,
        particleShape: 'circle',
        velocityRandomness: 60
      },
      monochrome: {
        colors: ['#FFFFFF', '#CCCCCC', '#999999', '#666666'],
        explosionForce: 5,
        gravity: 0.05,
        particleCount: 500,
        glowIntensity: 10,
        trailLength: 5,
        particleShape: 'square',
        velocityRandomness: 40
      },
      quantum: {
        colors: ['#00FFFF', '#FF00FF', '#FFFF00', '#00FF00'],
        explosionForce: 15,
        gravity: 0,
        particleCount: 300,
        glowIntensity: 40,
        trailLength: 25,
        particleShape: 'star',
        velocityRandomness: 100
      }
    }

    function applyPreset(name) {
      const preset = presets[name]
      if (!preset) return

      Object.assign(config, preset)

      // Update UI
      Object.keys(preset).forEach(key => {
        const element = document.getElementById(key)
        if (element) {
          element.value = preset[key]
          const valueDisplay = document.getElementById(`${key}-value`)
          if (valueDisplay) {
            valueDisplay.textContent = preset[key]
          }
        }
      })

      // Create new explosion
      particles = []
      createExplosion(canvas.width / 2, canvas.height / 2, config.particleCount)
    }

    function exportConfig() {
      const json = JSON.stringify(config, null, 2)
      const blob = new Blob([json], { type: 'application/json' })
      const url = URL.createObjectURL(blob)
      const a = document.createElement('a')
      a.href = url
      a.download = 'particle-explosion-config.json'
      a.click()
      URL.revokeObjectURL(url)
    }

    function resetToDefault() {
      applyPreset('neon')
    }

    function randomize() {
      config.explosionForce = Math.random() * 15 + 5
      config.gravity = (Math.random() - 0.5) * 0.5
      config.glowIntensity = Math.random() * 40 + 10
      config.trailLength = Math.floor(Math.random() * 25)
      config.particleCount = Math.floor(Math.random() * 1500 + 300)
      config.velocityRandomness = Math.random() * 80 + 20

      // Update UI
      Object.keys(config).forEach(key => {
        const element = document.getElementById(key)
        if (element && element.type === 'range') {
          element.value = config[key]
          const valueDisplay = document.getElementById(`${key}-value`)
          if (valueDisplay) {
            valueDisplay.textContent = config[key]
          }
        }
      })

      particles = []
      createExplosion(canvas.width / 2, canvas.height / 2, config.particleCount)
    }

    function togglePanel() {
      const panel = document.getElementById('controlsPanel')
      panel.classList.toggle('hidden')
    }
  </script>
</body>
</html>
